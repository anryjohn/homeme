



  <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key={{=GOOGLEMAP_KEY}}" type="text/javascript"></script>
    <script type="text/javascript">

    //Source: http://www.web2pyslices.com/slice/show/1588/how-to-use-gmapsjs-on-web2py
    function load() {
      if (GBrowserIsCompatible()) {
        var map = new GMap2(document.getElementById("map"));
        map.addControl(new GSmallMapControl());
        map.addControl(new GMapTypeControl());
        map.setCenter(new GLatLng (36.9741171, -122.03079630000002), 6);   //center at Santa Cruz

        //icon
        var Icon = new GIcon();
        Icon.image = "http://www.google.com/intl/en_us/mapfiles/ms/micons/red-dot.png";
        Icon.iconSize = new GSize(37, 34);
        Icon.shadowSize = new GSize(37, 34);

        //messgae 
        Icon.iconAnchor = new GPoint(9, 34);
        Icon.infoWindowAnchor = new GPoint(9, 2);
        Icon.infoShadowAnchor = new GPoint(18, 14);

        function createMarker(point, message) {
           // Set up our GMarkerOptions object
           mark = { icon:Icon };
           var marker = new GMarker(point, mark);
           GEvent.addListener(marker, "click", function() {
             marker.openInfoWindowHtml(message);
           });
           return marker;
        }
        
        //loop through landlord posting, mark points on the map
        {{for row in posts:}}{{if row.latitude and row.longitude:}}
          var point = new GLatLng({{=row.longitude}},{{=row.latitude}});
          map.addOverlay(createMarker(point, "Email:{{=row.user_email}} Address:{{=row.my_address}}"));
        {{pass}}{{pass}}
        
     }
    }
    </script>

<br/>
    <div id="map" style="width: 800px; height: 500px"></div>
    <script>load();</script>
<br/>
